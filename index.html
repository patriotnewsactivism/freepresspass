<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Generate your free digital press pass for journalism activities. Get recognized under First Amendment protections with our Constitutional Press accreditation.">
  <meta name="keywords" content="press pass, journalist credentials, media accreditation, first amendment, freedom of press, constitutional press, investigative journalist">
  <meta name="author" content="Constitutional Press Association">
  
  <!-- Open Graph / Social Media Meta Tags -->
  <meta property="og:title" content="Free Press Pass Generator">
  <meta property="og:description" content="Generate your free digital press pass for journalism activities. Get recognized under First Amendment protections.">
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://freepresspass.com">
  <meta property="og:image" content="/assets/press-pass-preview.jpg">
  
  <!-- Twitter Card Meta Tags -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="Free Press Pass Generator">
  <meta name="twitter:description" content="Generate your free digital press pass for journalism activities. Get recognized under First Amendment protections.">
  <meta name="twitter:image" content="/assets/press-pass-preview.jpg">
  
  <title>Free Press Pass Generator | First Amendment Journalist Credentials</title>
  <link rel="stylesheet" href="styles.css">
  <script src="https://sites.super.myninja.ai/_assets/ninja-daytona-script.js"></script>
  <!-- Structured Data for SEO -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "WebApplication",
    "name": "Free Press Pass Generator",
    "description": "Generate your digital press pass for journalism activities. Get recognized under First Amendment protections with our Constitutional Press accreditation.",
    "url": "https://freepresspass.com",
    "applicationCategory": "Government",
    "operatingSystem": "All",
    "offers": {
      "@type": "Offer",
      "price": "0",
      "priceCurrency": "USD"
    }
  }
  </script>
  
  <!-- Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-XXXXXXXXXX"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-XXXXXXXXXX');
  </script>
</head>
<body>
  <header>
    <!-- Main heading for the site: display FREE PRESS PASS instead of Constitutional Press -->
    <h1>FREE PRESS PASS</h1>
  </header>

  <!-- Tagline and YouTube channel links section.  This section sits directly under
       the header and explains who sponsors the generator.  It also links out to
       the official YouTube channels for Leroy Truth Investigations and The Exposure Report. -->
  <section class="tagline-section">
    <p>This press pass generator is brought to you by <strong>Leroy Truth Investigations</strong> and <strong>The Exposure Report</strong>.</p>
    <div class="channel-links">
      <a href="https://www.youtube.com/@leroytruth" target="_blank" rel="noopener noreferrer">Leroy Truth Investigations on YouTube</a>
      <span class="separator">&nbsp;|&nbsp;</span>
      <a href="https://www.youtube.com/@theexposurereport" target="_blank" rel="noopener noreferrer">The Exposure Report on YouTube</a>
    </div>
  </section>
  
  <main role="main">
    <div class="container">
      <div class="form-section" role="region" aria-labelledby="form-heading">
        <h2 id="form-heading">Generate Your Press Pass</h2>
  
  <main>
    <div class="container">
      <div class="form-section">
        <h2>Generate Your Press Pass</h2>
        <form id="passForm" netlify>
          <input type="hidden" name="form-name" value="press-passes" />
          <div class="form-group">
            <label for="name">Full Name:</label>
            <input type="text" id="name" name="name" required>
          </div>
          
          <div class="form-group">
            <label for="title">Title:</label>
            <input type="text" id="title" name="title" value="Investigative Journalist" required>
          </div>

          <!-- Email address input for tracking passes -->
          <div class="form-group">
            <label for="email">Email Address:</label>
            <input type="email" id="email" name="email" required>
          </div>
          
          <div class="form-group">
            <label for="photo">Add Photo:</label>
            <input type="file" id="photo" name="photo" accept="image/*">
            <div id="photo-preview" style="display:none; margin-top: 1rem;">
              <img id="preview-image" src="" alt="Press pass photo preview" style="max-width: 100%; max-height: 200px;">
            </div>
          </div>
          
          <button type="button" id="generate">Generate <strong>FREE</strong> Press Pass Now</button>
          <button type="button" id="checkout">Enhanced/Laminated Version $15</button>
        </form>
      </div>
      
      <div class="preview-section">
        <h2>Press Pass Preview</h2>
        <canvas id="passCanvas" width="400" height="600"></canvas>
        <div class="actions">
          <button id="download">Download</button>
          <button id="openImage">Open Image</button>
        </div>
      </div>
    </div>

    <!-- Courtesy section below preview -->
    <section class="courtesy-section">
      <h2>Courtesy of Leroy Truth Investigations and The Exposure Report</h2>
      <p>Dedicated to the pursuit of truth and the protection of constitutional freedoms</p>
    </section>

    <!-- Follow our journalism section with channel links -->
    <section class="follow-section">
      <!-- Removed the visible heading inside the follow section to simplify styling. The section is self-explanatory through the buttons. -->
      <div class="follow-buttons">
        <a href="https://www.youtube.com/@leroytruth" target="_blank" rel="noopener noreferrer">üì∫ Leroy Truth Investigations</a>
        <a href="https://www.youtube.com/@theexposurereport" target="_blank" rel="noopener noreferrer">üéôÔ∏è The Exposure Report</a>
      </div>
    </section>

    <!-- Informational section explaining press and journalism, journalist definition, First Amendment protection, and constitutional foundation -->
    <section class="info-section">
      <div class="info-card">
        <h3>üì∞ What Is Press &amp; Journalism?</h3>
        <h4>üìΩÔ∏è Definition of "Press"</h4>
        <p><strong>The Press</strong> refers to news media organizations, journalists, and individuals who gather, verify, and disseminate information to the public. This includes traditional newspapers, television news, radio journalism, digital publications, independent journalists, bloggers, podcasters, and citizen journalists who report on matters of public interest.</p>
        <p>The press serves as a crucial check on government power and provides citizens with the information necessary for democratic participation. The term encompasses both institutional media organizations and individual journalists working independently.</p>
      </div>
      <div class="info-card">
        <h3>üßë‚Äçüíº Definition of "Journalist"</h3>
        <p><strong>A Journalist</strong> is any person who regularly gathers, writes, edits, or disseminates news or information to the public. This includes:</p>
        <ul>
          <li><strong>Traditional journalists</strong> employed by newspapers, magazines, television, or radio stations</li>
          <li><strong>Freelance reporters</strong> who contribute to multiple publications</li>
          <li><strong>Independent journalists</strong> who publish through their own platforms</li>
          <li><strong>Citizen journalists</strong> who report on events in their communities</li>
          <li><strong>Bloggers and podcasters</strong> who regularly cover news and current events</li>
          <li><strong>Documentary filmmakers</strong> who investigate and report on issues of public concern</li>
        </ul>
      </div>
      <div class="info-card">
        <h3>‚öñÔ∏è First Amendment Protection</h3>
        <p>The First Amendment to the U.S. Constitution protects freedom of the press without requiring journalists to have special licenses, credentials, or formal training. <strong>Any person engaged in gathering and disseminating news to the public is entitled to press protections under the Constitution.</strong></p>
        <p>Courts have consistently ruled that press freedom is not limited to traditional media outlets or credentialed journalists. The digital age has democratized journalism, and constitutional protections extend to all who perform the essential function of informing the public.</p>
      </div>
      <div class="info-card">
        <h3>üèõÔ∏è Constitutional Foundation</h3>
        <p>In recognition of the fundamental principle enshrined in the First Amendment of the United States Constitution, which guarantees that "Congress shall make no law‚Ä¶ abridging the freedom of speech, or of the press," this initiative seeks to protect and empower independent journalists in their vital role as guardians of democracy.</p>
        <p>The Press Pass represents more than mere identification; it embodies the constitutional covenant between a free society and those who dedicate themselves to the pursuit of truth, the documentation of events, and the preservation of the historical record.</p>
        <h4>üéØ Our Mission</h4>
        <p>We believe that every citizen has the right to seek, receive, and share information. This press credential supports that fundamental right by providing independent journalists with a visible symbol of their constitutional protections. A robust and free press is essential to holding power accountable and ensuring an informed public.</p>
      </div>
    </section>

  </main>
  
  <div class="faq-section">
      <h2>Frequently Asked Questions</h2>
      <div class="faq-item">
        <h3>Is this press pass legally valid?</h3>
        <p>This digital press pass recognizes your rights under the First Amendment of the UÊÜ≤Ê≥ï. While it doesn't replace official media credentials, it serves as a statement of your constitutional protections as a journalist.</p>
      </div>
      <div class="faq-item">
        <h3>How do I use this press pass?</h3>
        <p>Generate your pass using the form above, then download or open the image on your mobile device. You can present this digital pass when engaging in journalism activities to assert your First Amendment rights.</p>
      </div>
      <div class="faq-item">
        <h3>What's the difference between digital and laminated passes?</h3>
        <p>The digital pass is free and can be generated instantly. The laminated pass is a physical card that can be purchased for $15, which some may find more authoritative when presenting in person.</p>
      </div>
      <div class="faq-item">
        <h3>Do I need journalism experience to use this pass?</h3>
        <p>No experience is required. This pass recognizes your rights under the First Amendment, which protects all citizens' freedom of the press.</p>
      </div>
    </div>
    
    <div class="disclaimers">
      <h2>Legal Disclaimers</h2>
      <p>This digital press pass recognizes your rights under the First Amendment of the U.S. Constitution. While it serves as a statement of those protections, it does not replace official media credentials or provide legal immunity. The Constitutional Press Association is not liable for any legal issues that may arise from the use of this pass.</p>
      <p>For physical laminated passes, please note that they are provided as a convenience and do not confer additional legal protections beyond those of the digital version.</p>
    </div>
    
    <footer>
      <p>This journalist is recognized under the protections of the First Amendment of the U.S. Constitution. Any interference will be a violation of federal law.</p>
      <p>Do not hinder, exclude, or block the view of this journalist in the exercise of court-recognized First Amendment rights.</p>
    </footer>
    
    <div class="how-it-works">
      <h2>How It Works</h2>
      <ol>
        <li>Fill in your name and title in the form above</li>
        <li>Add a photo (optional but recommended)</li>
        <li>Click "Generate FREE Press Pass Now" to create your digital credential</li>
        <li>Download the pass or open it on mobile devices</li>
        <li>Present your pass when engaging in journalism activities</li>
      </ol>
    </div>
    
    <div class="about-section">
      <h2>About Constitutional Press</h2>
      <p>The Constitutional Press Association is dedicated to protecting and promoting First Amendment rights for all journalists, from professionals to citizen reporters. Our press pass serves as a tool to assert these constitutional protections.</p>
    </div>
  
  <script>
    // Canvas rendering
    const canvas = document.getElementById('passCanvas');
    const ctx = canvas.getContext('2d');
    
    // Generate a random pass ID
    function genPassId() {
      return 'pass-' + Math.random().toString(36).substring(2, 10).toUpperCase();
    }
    
    // Get brand name
    function brandName() {
      return 'CONSTITUTIONAL PRESS ASSOCIATION';
    }
    
    // Debounce function for performance optimization
    function debounce(func, wait) {
      let timeout;
      return function executedFunction(...args) {
        const later = () => {
          clearTimeout(timeout);
          func(...args);
        };
        clearTimeout(timeout);
        timeout = setTimeout(later, wait);
      };
    }
    
    // Draw the press credential on canvas.  The layout of this pass is modeled
    // after a traditional laminated credential with a large photo on the left,
    // a bold vertical brand on the right and important metadata below.  Text
    // measurements are adjusted to avoid overruns beyond the canvas margins.
    function drawPass(name, title, photoSrc = null) {
      // Normalize inputs and provide defaults
      const displayName = name && name.trim() ? name.trim() : 'YOUR NAME HERE';
      const displayTitle = title && title.trim() ? title.trim() : 'INDEPENDENT JOURNALIST';

      // Prepare a helper to adjust long strings to fit within a given width.
      // This function will reduce the font size in steps until the text fits.
      function fitText(text, initialSize, maxWidth) {
        let size = initialSize;
        ctx.font = `bold ${size}px "Helvetica", Arial, sans-serif`;
        while (ctx.measureText(text).width > maxWidth && size > 8) {
          size -= 1;
          ctx.font = `bold ${size}px "Helvetica", Arial, sans-serif`;
        }
        return size;
      }

      // Clear canvas and set background
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      ctx.fillStyle = '#ffffff';
      ctx.fillRect(0, 0, canvas.width, canvas.height);

      // Outer border
      ctx.strokeStyle = '#2c3e50';
      ctx.lineWidth = 3;
      ctx.strokeRect(5, 5, canvas.width - 10, canvas.height - 10);

      // Top header bar: red background with white text and black stroke
      const headerHeight = 60;
      ctx.fillStyle = '#dc143c';
      ctx.fillRect(5, 5, canvas.width - 10, headerHeight);
      ctx.textAlign = 'center';
      const headerText = 'PRESS CREDENTIAL';
      ctx.font = 'bold 28px "Helvetica", Arial, sans-serif';
      // Draw black stroke for the letters to give contrast
      ctx.strokeStyle = '#1a252f';
      ctx.lineWidth = 2;
      ctx.strokeText(headerText, canvas.width / 2, 5 + headerHeight / 2 + 10);
      ctx.fillStyle = '#ffffff';
      ctx.fillText(headerText, canvas.width / 2, 5 + headerHeight / 2 + 10);

      // Subheading under the header bar
      ctx.fillStyle = '#2c3e50';
      ctx.font = 'bold 14px "Helvetica", Arial, sans-serif';
      ctx.fillText('CONSTITUTIONAL PRESS', canvas.width / 2, 5 + headerHeight + 28);

      // Dimensions for photo and right-hand column
      const photoX = 25;
      // Position the photo area below the header and subheading.  This ensures
      // adequate spacing between the red bar and the credential content.  The
      // y‚Äëcoordinate accounts for the 5px padding, 60px header, subheading and
      // an extra margin of 20px.
      const photoY = 140;
      const photoW = 150;
      const photoH = 180;
      const rightX = photoX + photoW + 20;
      const rightW = canvas.width - rightX - 25;

      // Photo area: draw border and either the supplied image or a placeholder label.
      ctx.strokeStyle = '#2c3e50';
      ctx.lineWidth = 2;
      ctx.strokeRect(photoX, photoY, photoW, photoH);
      ctx.fillStyle = '#2c3e50';
      ctx.textAlign = 'center';
      if (photoSrc) {
        // Asynchronously load and draw the supplied photo onto the canvas.
        const img = new Image();
        img.onload = function() {
          ctx.drawImage(img, photoX, photoY, photoW, photoH);
        };
        img.src = photoSrc;
      } else {
        // When no photo is provided, display a simple placeholder label.
        ctx.font = 'bold 14px "Helvetica", Arial, sans-serif';
        ctx.fillText('PHOTO', photoX + photoW / 2, photoY + photoH / 2);
      }

      // Right-hand column: brand, role and personal details
      const rightCenterX = rightX + rightW / 2;
      // Begin drawing text in the right-hand column.  The vertical starting
      // position is calculated relative to the top of the photo area, allowing
      // space for the header bar and subheading.  Each subsequent line is
      // offset by a consistent spacing to keep the content within the
      // constrained height.
      let yPos = photoY + 25;
      // Draw the passholder's name, split into stacked lines.
      ctx.fillStyle = '#2c3e50';
      ctx.textAlign = 'center';
      const nameParts = displayName.toUpperCase().split(/\s+/);
      nameParts.forEach(part => {
        ctx.font = 'bold 24px "Helvetica", Arial, sans-serif';
        ctx.fillText(part, rightCenterX, yPos);
        yPos += 28;
      });
      // Small gap before role lines
      yPos += 5;
      // Role lines: INDEPENDENT / JOURNALIST.  Use a 12px font and
      // 20px spacing between lines.
      ctx.font = 'bold 12px "Helvetica", Arial, sans-serif';
      ctx.fillText('INDEPENDENT', rightCenterX, yPos);
      yPos += 20;
      ctx.fillText('JOURNALIST', rightCenterX, yPos);
      yPos += 20;
      // Personal title ‚Äì smaller size (initial 12px) and scaled if long.
      const titleFontSize = fitText(displayTitle, 12, rightW - 10);
      ctx.font = `bold ${titleFontSize}px "Helvetica", Arial, sans-serif`;
      ctx.fillText(displayTitle, rightCenterX, yPos);

      // Baseline for metadata section
      let baseY = photoY + photoH + 30;
      // Footer brand line
      // footer brand removed per instruction
      // Generate unique ID
      const id = genPassId();
      ctx.font = '14px "Helvetica", Arial, sans-serif';
      ctx.fillText(`ID: ${id}`, canvas.width / 2, baseY);
      baseY += 18;
      // Issued by
      ctx.font = 'bold 12px "Helvetica", Arial, sans-serif';
      ctx.fillText('ISSUED BY', canvas.width / 2, baseY);
      baseY += 16;
      ctx.font = 'bold 12px "Helvetica", Arial, sans-serif';
      ctx.fillText('CONSTITUTIONAL PRESS ASSOCIATION', canvas.width / 2, baseY);
      baseY += 18;
      // Expiration date (always end of next 2 years)
      const expDate = new Date(new Date().getFullYear() + 2, 11, 31);
      ctx.fillStyle = '#dc143c';
      ctx.font = 'bold 14px "Helvetica", Arial, sans-serif';
      ctx.fillText(`VALID THROUGH DEC 31, ${expDate.getFullYear()}`, canvas.width / 2, baseY);
      baseY += 26;
      // Legal notice lines.  Use a slightly smaller font (11px) and
      // compressed line spacing to keep the text within the available
      // vertical space.
      ctx.fillStyle = '#1a252f';
      ctx.font = 'bold 11px "Helvetica", Arial, sans-serif';
      const legalLines = [
        'THIS JOURNALIST IS RECOGNIZED UNDER THE PROTECTIONS',
        'OF THE FIRST AMENDMENT OF THE U.S. CONSTITUTION.',
        'ANY INTERFERENCE WILL BE A VIOLATION OF FEDERAL LAW.'
      ];
      legalLines.forEach((t, i) => {
        ctx.fillText(t, canvas.width / 2, baseY + i * 14);
      });
      baseY += legalLines.length * 14 + 16;
      // Additional notes.  Use an even smaller font (10px) and
      // compressed spacing.
      ctx.fillStyle = '#2c3e50';
      ctx.font = 'bold 10px "Helvetica", Arial, sans-serif';
      const noteLines = [
        'Do not hinder, exclude, or block the view of this journalist',
        'in the exercise of court‚Äërecognized First Amendment rights.'
      ];
      noteLines.forEach((t, i) => {
        ctx.fillText(t, canvas.width / 2, baseY + i * 14);
      });

      return id;
    }
    
    // Handle photo preview
    document.getElementById('photo').addEventListener('change', function(e) {
      const preview = document.getElementById('photo-preview');
      const previewImage = document.getElementById('preview-image');
      
      if (this.files && this.files[0]) {
        const reader = new FileReader();
        
        reader.onload = function(event) {
          previewImage.src = event.target.result;
          preview.style.display = 'block';
          
          // Add error handling for image loading
          previewImage.onerror = function() {
            alert('Error loading image. Please try another photo.');
            preview.style.display = 'none';
          };
        };
        
        reader.onerror = function() {
          alert('Error reading file. Please try another photo.');
          preview.style.display = 'none';
        };
        
        reader.readAsDataURL(this.files[0]);
      } else {
        preview.style.display = 'none';
      }
    });
    
    // Download functionality
    document.getElementById('download').addEventListener('click', () => {
      const link = document.createElement('a');
      link.download = 'press-pass.png';
      link.href = canvas.toDataURL('image/png');
      link.click();
    });
    
    // Open image functionality (for mobile)
    document.getElementById('openImage').addEventListener('click', () => {
      const dataUrl = canvas.toDataURL('image/png');
      window.open(dataUrl, '_blank');
    });
    
    // Checkout functionality
    document.getElementById('checkout').addEventListener('click', async () => {
      const checkoutButton = document.getElementById('checkout');
      const originalText = checkoutButton.textContent;
      
      // Show loading indicator
      checkoutButton.textContent = 'Processing...';
      checkoutButton.disabled = true;
      
      const name = (document.getElementById('name').value || '').trim();
      const id = 'pass-' + (Date.now().toString(36).toUpperCase());
      try {
        const res = await fetch('/.netlify/functions/create-checkout-session', {
          method: 'POST',
          body: JSON.stringify({ quantity: 1, passId: id, name })
        });
        const data = await res.json();
        if (data.url) {
          window.location.href = data.url;
        } else {
          alert(data.error || 'Unable to start checkout.');
        }
      } catch (e) {
        alert('Checkout failed. Please try again.');
      } finally {
        // Reset button
        checkoutButton.textContent = originalText;
        checkoutButton.disabled = false;
      }
    });
    
    // Initialize with a sample pass
    drawPass('YOUR NAME HERE', 'Investigative Journalist');

    // Add real-time updates for name and title fields
    document.getElementById('name').addEventListener('input', function() {
      const nameValue = this.value.trim();
      const titleValue = document.getElementById('title').value.trim();
      drawPass(nameValue || 'YOUR NAME HERE', titleValue);
    });

    document.getElementById('title').addEventListener('input', function() {
      const nameValue = document.getElementById('name').value.trim();
      const titleValue = this.value.trim();
      drawPass(nameValue || 'YOUR NAME HERE', titleValue);
    });
  </script>

  <!-- Module script to handle press pass generation and tracking -->
  <script type="module">
    import { trackPass } from './api.js';
    // Attach an event listener to the Generate button that creates the pass image and records it in Supabase.
    document.getElementById('generate').addEventListener('click', async () => {
      const nameInput = document.getElementById('name').value;
      const titleInput = document.getElementById('title').value;
      const emailInput = document.getElementById('email').value;
      const passNumber = genPassId();
      // Determine if a photo file has been selected.  If so, read it as a data URL
      // and then draw the pass with the photo once the file has been loaded.
      const photoInput = document.getElementById('photo');
      if (photoInput.files && photoInput.files[0]) {
        const reader = new FileReader();
        reader.onload = function(e) {
          // Draw the pass including the uploaded photo
          drawPass(nameInput, titleInput, e.target.result);
          // Record the pass details in the backend
          trackPass({
            name: nameInput,
            title: titleInput,
            email: emailInput,
            pass_number: passNumber,
            organization: 'Full Court Press' // Adding organization field
          }).catch(err => {
            console.error('Error tracking press pass:', err);
          });
        };
        reader.onerror = function() {
          alert('Error reading file. Please try another photo.');
          // Still draw the pass without a photo if reading fails
          drawPass(nameInput, titleInput);
          trackPass({
            name: nameInput,
            title: titleInput,
            email: emailInput,
            pass_number: passNumber,
            organization: 'Full Court Press' // Adding organization field
          }).catch(err => {
            console.error('Error tracking press pass:', err);
          });
        };
        reader.readAsDataURL(photoInput.files[0]);
      } else {
        // No photo selected: draw the pass with placeholder and record details
        drawPass(nameInput, titleInput);
        trackPass({
          name: nameInput,
          title: titleInput,
          email: emailInput,
          pass_number: passNumber,
          organization: 'Full Court Press' // Adding organization field
        }).catch(err => {
          console.error('Error tracking press pass:', err);
        });
      }
    });
  </script>
</body>
</html>


