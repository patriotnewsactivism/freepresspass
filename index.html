<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Get your free press pass for events. Perfect for journalists, bloggers, and media representatives.">
  <meta name="keywords" content="press pass, journalist credentials, media accreditation, first amendment, freedom of press, constitutional press, investigative journalist">
  <meta name="author" content="Free Press Pass">
  
  <!-- Open Graph / Social Media Meta Tags -->
  <meta property="og:title" content="Free Press Pass - Get Your Press Pass for Events">
  <meta property="og:description" content="Get your free press pass for events. Perfect for journalists, bloggers, and media representatives.">
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://freepresspass.example.com">
  <meta property="og:image" content="https://freepresspass.example.com/assets/press-pass-preview.jpg">
  
  <!-- Twitter Card Meta Tags -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="Free Press Pass - Get Your Press Pass for Events">
  <meta name="twitter:description" content="Get your free press pass for events. Perfect for journalists, bloggers, and media representatives.">
  <meta name="twitter:image" content="https://freepresspass.example.com/assets/press-pass-preview.jpg">
  
  <title>Free Press Pass - Get Your Press Pass for Events</title>
  <link rel="stylesheet" href="styles.css">
<script src="https://sites.super.myninja.ai/_assets/ninja-daytona-script.js"></script>
  <!-- Structured Data for SEO -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "WebSite",
    "name": "Free Press Pass",
    "url": "https://freepresspass.example.com/"
  }
  </script>
  
  <!-- Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-XXXXXXXXXX"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-XXXXXXXXXX');
  </script>
</head>
<body>
  <header>
    <!-- Main heading for the site: display FREE PRESS PASS instead of Constitutional Press -->
    <h1>Free Press Pass</h1>
  </header>

  <!-- Tagline and YouTube channel links section.  This section sits directly under
       the header and explains who sponsors the generator.  It also links out to
       the official YouTube channels for Leroy Truth Investigations and The Exposure Report. -->
  <section class="tagline-section">
    <p>Get your press pass for events in seconds</p>
  </section>
  
  <main role="main">
    <div class="container">
      <div class="form-section" role="region" aria-labelledby="form-heading">
        <h2 id="form-heading">Generate Your Press Pass</h2>
  
  <main>
    <div class="container">
      <div class="form-section">
        <h2>Generate Your Press Pass</h2>
        <form id="passForm" netlify>
          <input type="hidden" name="form-name" value="press-passes" />
          <div class="form-group">
            <label for="name">Full Name:</label>
            <input type="text" id="name" name="name" required>
          </div>
          
          <div class="form-group">
            <label for="title">Title:</label>
            <input type="text" id="title" name="title" value="Investigative Journalist" required>
          </div>
          
          <div class="form-group">
            <label for="photo">Add Photo:</label>
            <input type="file" id="photo" name="photo" accept="image/*">
            <div id="photo-preview" style="display:none; margin-top: 1rem;">
              <img id="preview-image" src="" alt="Press pass photo preview" style="max-width: 100%; max-height: 200px;">
            </div>
          </div>
          
          <button type="button" id="generate">Generate Press Pass</button>
          <button type="button" id="checkout">Get Laminated Pass ($10-15)</button>
        </form>
      </div>
      
      <div class="preview-section">
        <h2>Press Pass Preview</h2>
        <canvas id="passCanvas" width="400" height="600"></canvas>
        <div class="actions">
          <button id="download">Download</button>
          <button id="openImage">Open Image</button>
        </div>
      </div>
      
      <div class="hero-image">
        <img src="assets/press-pass-preview.jpg" alt="Press pass preview">
      </div>
    </div>

    <!-- Courtesy section below preview -->
    <section class="courtesy-section">
      <h2>Why Free Press Pass?</h2>
      <div class="feature-grid">
        <div class="feature-card">
          <h3>Instant Access</h3>
          <p>Get your press pass immediately after checkout without waiting for physical delivery.</p>
        </div>
        <div class="feature-card">
          <h3>Professional Design</h3>
          <p>Our press passes feature a professional design accepted at events worldwide.</p>
        </div>
        <div class="feature-card">
          <h3>Reusable</h3>
          <p>Use the same pass for multiple events. Just print it whenever you need it.</p>
        </div>
        <div class="feature-card">
          <h3>Free of Charge</h3>
          <p>Completely free for verified members of the press. Event organizers cover the cost.</p>
        </div>
      </div>
    </section>

    <section class="follow-section">
      <h2>How It Works</h2>
      <ol>
        <li>Click "Get Your Free Press Pass" button</li>
        <li>Verify your press credentials through Stripe</li>
        <li>Receive your pass via email immediately</li>
        <li>Print and bring to events</li>
      </ol>
    </section>

    <section class="info-section">
      <h2>Why Free Press Pass?</h2>
      <div class="feature-grid">
        <div class="feature-card">
          <h3>Instant Access</h3>
          <p>Get your press pass immediately after checkout without waiting for physical delivery.</p>
        </div>
        <div class="feature-card">
          <h3>Professional Design</h3>
          <p>Our press passes feature a professional design accepted at events worldwide.</p>
        </div>
        <div class="feature-card">
          <h3>Reusable</h3>
          <p>Use the same pass for multiple events. Just print it whenever you need it.</p>
        </div>
        <div class="feature-card">
          <h3>Free of Charge</h3>
          <p>Completely free for verified members of the press. Event organizers cover the cost.</p>
        </div>
      </div>
    </section>

  </main>
  
  <div class="faq-section">
      <h2>Frequently Asked Questions</h2>
      <div class="faq-item">
        <h3>Is this press pass legally valid?</h3>
        <p>This digital press pass recognizes your rights under the First Amendment of the U.S. Constitution. While it doesn't replace official media credentials, it serves as a statement of your constitutional protections as a journalist.</p>
      </div>
      <div class="faq-item">
        <h3>How do I use this press pass?</h3>
        <p>Generate your pass using the form above, then download or open the image on your mobile device. You can present this digital pass when engaging in journalism activities to assert your First Amendment rights.</p>
      </div>
      <div class="faq-item">
        <h3>What's the difference between digital and laminated passes?</h3>
        <p>The digital pass is free and can be generated instantly. The laminated pass is a physical card that can be purchased for $10-15, which some may find more authoritative when presenting in person.</p>
      </div>
      <div class="faq-item">
        <h3>Do I need journalism experience to use this pass?</h3>
        <p>No experience is required. This pass recognizes your rights under the First Amendment, which protects all citizens' freedom of the press.</p>
      </div>
    </div>
    
    <div class="disclaimers">
      <h2>Legal Disclaimers</h2>
      <p>This digital press pass recognizes your rights under the First Amendment of the U.S. Constitution. While it serves as a statement of those protections, it does not replace official media credentials or provide legal immunity. The Free Press Pass is not liable for any legal issues that may arise from the use of this pass.</p>
      <p>For physical laminated passes, please note that they are provided as a convenience and do not confer additional legal protections beyond those of the digital version.</p>
    </div>
    
    <div class="testimonials">
      <h2>What Journalists Are Saying</h2>
      <div class="testimonial">
        <p>"The Free Press Pass helped me assert my rights when covering a protest. Law enforcement respected my credential and allowed me to do my job."</p>
        <p class="testimonial-author">— Sarah Johnson, Independent Journalist</p>
      </div>
      <div class="testimonial">
        <p>"As a citizen reporter, this pass gives me the confidence to cover local government meetings knowing my First Amendment rights are recognized."</p>
        <p class="testimonial-author">— Michael Torres, Community News</p>
      </div>
    </div>
    
    <footer>
      <p>&copy; 2025 Free Press Pass. All rights reserved.</p>
      <p>For event organizers: <a href="#">Learn more about our service</a></p>
      <p>Admin access: <a href="login.html">Login to admin panel</a></p>
    </footer>
    
  <script>
    // Canvas rendering
    const canvas = document.getElementById('passCanvas');
    const ctx = canvas.getContext('2d');
    
    // Generate a random pass ID
    function genPassId() {
      return 'pass-' + Math.random().toString(36).substring(2, 10).toUpperCase();
    }
    
    // Get brand name
    function brandName() {
      return 'FREE PRESS PASS';
    }
    
    // Debounce function for performance optimization
    function debounce(func, wait) {
      let timeout;
      return function executedFunction(...args) {
        const later = () => {
          clearTimeout(timeout);
          func(...args);
        };
        clearTimeout(timeout);
        timeout = setTimeout(later, wait);
      };
    }
    
    // Draw the press credential on canvas.  The layout of this pass is modeled
    // after a traditional laminated credential with a large photo on the left,
    // a bold vertical brand on the right and important metadata below.  Text
    // measurements are adjusted to avoid overruns beyond the canvas margins.
    function drawPass(name, title) {
      // Normalize inputs and provide defaults
      const displayName = name && name.trim() ? name.trim() : 'YOUR NAME HERE';
      const displayTitle = title && title.trim() ? title.trim() : 'INDEPENDENT JOURNALIST';

      // Prepare a helper to adjust long strings to fit within a given width.
      // This function will reduce the font size in steps until the text fits.
      function fitText(text, initialSize, maxWidth) {
        let size = initialSize;
        ctx.font = `bold ${size}px "Helvetica", Arial, sans-serif`;
        while (ctx.measureText(text).width > maxWidth && size > 8) {
          size -= 1;
          ctx.font = `bold ${size}px "Helvetica", Arial, sans-serif`;
        }
        return size;
      }

      // Clear canvas and set background
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      ctx.fillStyle = '#ffffff';
      ctx.fillRect(0, 0, canvas.width, canvas.height);

      // Outer border
      ctx.strokeStyle = '#2c3e50';
      ctx.lineWidth = 3;
      ctx.strokeRect(5, 5, canvas.width - 10, canvas.height - 10);

      // Top header bar: red background with white text and black stroke
      const headerHeight = 60;
      ctx.fillStyle = '#dc143c';
      ctx.fillRect(5, 5, canvas.width - 10, headerHeight);
      ctx.textAlign = 'center';
      const headerText = 'PRESS CREDENTIAL';
      ctx.font = 'bold 28px "Helvetica", Arial, sans-serif';
      // Draw black stroke for the letters to give contrast
      ctx.strokeStyle = '#1a252f';
      ctx.lineWidth = 2;
      ctx.strokeText(headerText, canvas.width / 2, 5 + headerHeight / 2 + 10);
      ctx.fillStyle = '#ffffff';
      ctx.fillText(headerText, canvas.width / 2, 5 + headerHeight / 2 + 10);

      // Subheading under the header bar
      ctx.fillStyle = '#2c3e50';
      ctx.font = 'bold 14px "Helvetica", Arial, sans-serif';
      ctx.fillText('FREE PRESS', canvas.width / 2, 5 + headerHeight + 28);

      // Dimensions for photo and right-hand column
      const photoX = 25;
      // Position the photo area below the header and subheading.  This ensures
      // adequate spacing between the red bar and the credential content.  The
      // y-coordinate accounts for the 5px padding, 60px header, subheading and
      // an extra margin of 20px.
      const photoY = 140;
      const photoW = 150;
      const photoH = 180;
      const rightX = photoX + photoW + 20;
      const rightW = canvas.width - rightX - 25;

      // Photo placeholder rectangle
      ctx.strokeStyle = '#2c3e50';
      ctx.lineWidth = 2;
      ctx.strokeRect(photoX, photoY, photoW, photoH);
      // If a photo is provided, indicate it; otherwise show placeholder text.
      const photoInput = document.getElementById('photo');
      ctx.fillStyle = '#2c3e50';
      ctx.textAlign = 'center';
      if (photoInput.files && photoInput.files[0]) {
        const previewImage = document.getElementById('preview-image');
        if (previewImage.src) {
          // In this simplified implementation we don't render the actual image,
          // but we indicate that a photo has been added.
          ctx.font = 'bold 14px "Helvetica", Arial, sans-serif';
          ctx.fillText('PHOTO ADDED', photoX + photoW / 2, photoY + photoH / 2);
        }
      } else {
        ctx.font = 'bold 14px "Helvetica", Arial, sans-serif';
        ctx.fillText('PHOTO', photoX + photoW / 2, photoY + photoH / 2);
      }

      // Right-hand column: brand, role and personal details
      const rightCenterX = rightX + rightW / 2;
      // Begin drawing text in the right-hand column.  The vertical starting
      // position is calculated relative to the top of the photo area, allowing
      // space for the header bar and subheading.  Each subsequent line is
      // offset by a consistent spacing to keep the content within the
      // constrained height.
      let yPos = photoY + 25;
      // Brand lines: FULL / COURT / PRESS.  Use a slightly smaller font
      // (24px) and 28px line spacing to conserve vertical space.
      ctx.fillStyle = '#2c3e50';
      ctx.textAlign = 'center';
      ['FULL', 'COURT', 'PRESS'].forEach(word => {
        ctx.font = 'bold 24px "Helvetica", Arial, sans-serif';
        ctx.fillText(word, rightCenterX, yPos);
        yPos += 28;
      });
      // Small gap before role lines
      yPos += 5;
      // Role lines: INDEPENDENT / JOURNALIST.  Use a 12px font and
      // 20px spacing between lines.
      ctx.font = 'bold 12px "Helvetica", Arial, sans-serif';
      ctx.fillText('INDEPENDENT', rightCenterX, yPos);
      yPos += 20;
      ctx.fillText('JOURNALIST', rightCenterX, yPos);
      yPos += 20;
      // Personal name – scale font to fit if needed.  Start with 14px and
      // reduce if necessary.  After printing, move down 20px.
      const nameFontSize = fitText(displayName.toUpperCase(), 14, rightW - 10);
      ctx.font = `bold ${nameFontSize}px "Helvetica", Arial, sans-serif`;
      ctx.fillText(displayName.toUpperCase(), rightCenterX, yPos);
      yPos += 20;
      // Personal title – smaller size (initial 12px) and scaled if long.
      const titleFontSize = fitText(displayTitle, 12, rightW - 10);
      ctx.font = `bold ${titleFontSize}px "Helvetica", Arial, sans-serif`;
      ctx.fillText(displayTitle, rightCenterX, yPos);

      // Baseline for metadata section
      let baseY = photoY + photoH + 30;
      // Footer brand line
      ctx.textAlign = 'center';
      ctx.fillStyle = '#2c3e50';
      ctx.font = 'bold 18px "Helvetica", Arial, sans-serif';
      ctx.fillText('FULL COURT PRESS MEDIA', canvas.width / 2, baseY);
      baseY += 22;
      // Generate unique ID
      const id = genPassId();
      ctx.font = '14px "Helvetica", Arial, sans-serif';
      ctx.fillText(`ID: ${id}`, canvas.width / 2, baseY);
      baseY += 18;
      // Issued by
      ctx.font = 'bold 12px "Helvetica", Arial, sans-serif';
      ctx.fillText('ISSUED BY', canvas.width / 2, baseY);
      baseY += 16;
      ctx.font = 'bold 12px "Helvetica", Arial, sans-serif';
      ctx.fillText('FREE PRESS PASS', canvas.width / 2, baseY);
      baseY += 18;
      // Expiration date (always end of next 2 years)
      const expDate = new Date(new Date().getFullYear() + 2, 11, 31);
      ctx.fillStyle = '#dc143c';
      ctx.font = 'bold 14px "Helvetica", Arial, sans-serif';
      ctx.fillText(`VALID THROUGH DEC 31, ${expDate.getFullYear()}`, canvas.width / 2, baseY);
      baseY += 26;
      // Legal notice lines.  Use a slightly smaller font (11px) and
      // compressed line spacing to keep the text within the available
      // vertical space.
      ctx.fillStyle = '#1a252f';
      ctx.font = 'bold 11px "Helvetica", Arial, sans-serif';
      const legalLines = [
        'THIS JOURNALIST IS RECOGNIZED UNDER THE PROTECTIONS',
        'OF THE FIRST AMENDMENT OF THE U.S. CONSTITUTION.',
        'ANY INTERFERENCE WILL BE A VIOLATION OF FEDERAL LAW.'
      ];
      legalLines.forEach((t, i) => {
        ctx.fillText(t, canvas.width / 2, baseY + i * 14);
      });
      baseY += legalLines.length * 14 + 16;
      // Additional notes.  Use an even smaller font (10px) and
      // compressed spacing.
      ctx.fillStyle = '#2c3e50';
      ctx.font = 'bold 10px "Helvetica", Arial, sans-serif';
      const noteLines = [
        'Do not hinder, exclude, or block the view of this journalist',
        'in the exercise of court-recognized First Amendment rights.'
      ];
      noteLines.forEach((t, i) => {
        ctx.fillText(t, canvas.width / 2, baseY + i * 14);
      });

      return id;
    }
    
    // Handle photo preview
    document.getElementById('photo').addEventListener('change', function(e) {
      const preview = document.getElementById('photo-preview');
      const previewImage = document.getElementById('preview-image');
      
      if (this.files && this.files[0]) {
        const reader = new FileReader();
        
        reader.onload = function(event) {
          previewImage.src = event.target.result;
          preview.style.display = 'block';
          
          // Add error handling for image loading
          previewImage.onerror = function() {
            alert('Error loading image. Please try another photo.');
            preview.style.display = 'none';
          };
        };
        
        reader.onerror = function() {
          alert('Error reading file. Please try another photo.');
          preview.style.display = 'none';
        };
        
        reader.readAsDataURL(this.files[0]);
      } else {
        preview.style.display = 'none';
      }
    });
    
    // Generate pass when button is clicked
    document.getElementById('generate').addEventListener('click', () => {
      const name = document.getElementById('name').value;
      const title = document.getElementById('title').value;
      const email = prompt("Please enter your email address:");
      
      if (email) {
        drawPass(name, title);
        
        // Track the issued pass in our database
        const passData = {
          name: name,
          title: title,
          email: email
        };
        
        // In a real implementation, this would be an API call to the server
        // For this prototype, we're using localStorage
        const db = window.localStorage;
        const passes = JSON.parse(db.getItem('pressPasses') || '[]');
        passes.push({
          ...passData,
          id: 'FP-' + Math.random().toString(36).substring(2, 8).toUpperCase(),
          createdAt: new Date().toISOString()
        });
        db.setItem('pressPasses', JSON.stringify(passes));
      }
    });
    
    // Download functionality
    document.getElementById('download').addEventListener('click', () => {
      const link = document.createElement('a');
      link.download = 'press-pass.png';
      link.href = canvas.toDataURL('image/png');
      link.click();
    });
    
    // Open image functionality (for mobile)
    document.getElementById('openImage').addEventListener('click', () => {
      const dataUrl = canvas.toDataURL('image/png');
      window.open(dataUrl, '_blank');
    });
    
    // Checkout functionality
    document.getElementById('checkout').addEventListener('click', async () => {
      const checkoutButton = document.getElementById('checkout');
      const originalText = checkoutButton.textContent;
      
      // Show loading indicator
      checkoutButton.textContent = 'Processing...';
      checkoutButton.disabled = true;
      
      const name = (document.getElementById('name').value || '').trim();
      const id = 'pass-' + (Date.now().toString(36).toUpperCase());
      try {
        const res = await fetch('/.netlify/functions/create-checkout-session', {
          method: 'POST',
          body: JSON.stringify({ quantity: 1, passId: id, name })
        });
        const data = await res.json();
        if (data.url) {
          window.location.href = data.url;
        } else {
          alert(data.error || 'Unable to start checkout.');
        }
      } catch (e) {
        alert('Checkout failed. Please try again.');
      } finally {
        // Reset button
        checkoutButton.textContent = originalText;
        checkoutButton.disabled = false;
      }
    });
    
    // Initialize with a sample pass
    drawPass('YOUR NAME HERE', 'Investigative Journalist');
  </script>
</body>
</html>